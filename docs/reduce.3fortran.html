<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco, monospace }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:0.1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 0.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<!--
<h5><a href="index.html">[UP]</a></h5>
<button type="button" onclick="javascript:history.back()">Back</button>
-->
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>C Library Functions &nbsp;-&nbsp;</I><NOBR>reduce (3)</NOBR><HR></H1>
</CENTER>
<BLOCKQUOTE>
<TABLE cellpadding=3><!-- tsb: <H1><HR><I>C Library Functions &nbsp;-&nbsp;</I><NOBR>reduce (3)</NOBR><HR></H1>
 -->
<TR></TR><TR></TR>
<TR valign=top><TD colspan=2>
<B>reduce(3fortran)</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
reduce(3fortran)
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
REDUCE(3) - [TRANSFORMATIONAL] General reduction of an array
<P>
</BLOCKQUOTE>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=10>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
There are two forms to this function:
<P>
<PRE>
         result = reduce(array, operation [,mask]  [,identity]  [,ordered] )
<P>
</PRE>
or
<P>
<PRE>
         result = reduce (array, operation, dim  &
         & [,mask] [,identity] [,ordered] )
<P>
          type(TYPE(kind=KIND)) function reduce &
          & (array, operation, dim, mask, identity, ordered )
<P>
           type(TYPE(kind=KIND)),intent(in) :: array
           pure function                  :: operation
           integer,intent(in),optional    :: dim
           logical,optional               :: mask
           type(TYPE),intent(in),optional :: identity
           logical,intent(in),optional    :: ordered
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>CHARACTERISTICS</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
ARRAY is an array of any type
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
OPERATION is a pure function with exactly two arguments
<TABLE width=100% cellpadding=3><!-- tsb: OPERATION is a pure function with exactly two arguments
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
each argument is scalar, non-allocatable, a nonpointer, nonpolymorphic
and nonoptional with the same type and kind as array.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
if one argument has the asynchronous, target, or value attribute so
shall the other.
</TD></TR>
<TR></TR></TABLE><!-- .IP \(bu 3 -->
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
DIM is an integer scalar
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
MASK is a logical conformable with ARRAY
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
IDENTITY is a scalar with the same type and type parameters as ARRAY
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
ORDERED is a logical scalar
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
the result is of the same type and type parameters as ARRAY.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=3>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
REDUCE(3) reduces a list of conditionally selected values from an array to a
single value by iteratively applying a binary function.
<P>
Common in functional programming, a REDUCE function applies a binary
operator (a pure function with two arguments) to all elements cumulatively.
<P>
REDUCE is a "higher-order" function; ie. it is a function that receives
other functions as arguments.
<P>
The REDUCE function receives a binary operator (a function with two
arguments, just like the basic arithmetic operators). It is first applied to
two unused values in the list to generate an accumulator value which is
subsequently used as the first argument to the function as the function is
recursively applied to all the remaining selected values in the input array.
</BLOCKQUOTE>
<A name=4>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
ARRAY : An array of any type and allowed rank to select values from.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
OPERATION : shall be a pure function with exactly two arguments; each
argument shall be a scalar, nonallocatable, nonpointer, nonpolymorphic,
nonoptional dummy data object with the same type and type parameters as
ARRAY. If one argument has the ASYNCHRONOUS, TARGET, or VALUE attribute,
the other shall have that attribute. Its result shall be a nonpolymorphic
scalar and have the same type and type parameters as ARRAY. OPERATION
should implement a mathematically associative operation. It need not be
commutative.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; NOTE</H4>
</A>
<BLOCKQUOTE>
If OPERATION is not computationally associative, REDUCE without
ORDERED=.TRUE. with the same argument values might not always produce the
same result, as the processor can apply the associative law to the
evaluation.
<P>
Many operations that mathematically are associative are not when applied to
floating-point numbers. The order you sum values in may affect the result,
for example.
<TABLE cellpadding=3><!-- tsb: Many operations that mathematically are associative are not when applied to
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
DIM : An integer scalar with a value in the range 1&lt;= DIM &lt;= n, where n
is the rank of ARRAY.
<TABLE width=100% cellpadding=3><!-- tsb: DIM : An integer scalar with a value in the range 1&lt;= DIM &lt;= n, where n
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
MASK : (optional) shall be of type logical and shall be conformable
with ARRAY.
<P>
When present only those elements of ARRAY are passed to OPERATION for
which the corresponding elements of MASK are true, as if *array was
filtered with PACK(3).
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
IDENTITY : shall be scalar with the same type and type parameters as
ARRAY. If the initial sequence is empty, the result has the value
IDENTIFY if IDENTIFY is present, and otherwise, error termination is
initiated.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
ORDERED : shall be a logical scalar. If ORDERED is present with the
value .true., the calls to the OPERATOR function begins with the first
two elements of ARRAY and the process continues in row-column order
until the sequence has only one element which is the value of the
reduction. Otherwise, the compiler is free to assume that the
operation is commutative and may evaluate the reduction in the most
optimal way.
</TD></TR>
<TR></TR></TABLE></TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>RESULT</H3>

</A>
<BLOCKQUOTE>
The result is of the same type and type parameters as ARRAY. It is scalar if
DIM does not appear.
<P>
If DIM is present, it indicates the one dimension along which to perform the
reduction, and the resultant array has a rank reduced by one relative to the
input array.
</BLOCKQUOTE>
<A name=6>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
The following examples all use the function MY_MULT, which returns the
product of its two real arguments.
<P>
<PRE>
         program demo_reduce
         implicit none
         character(len=*),parameter :: f=&#146;("[",*(g0,",",1x),"]")&#146;
         integer,allocatable :: arr(:), b(:,:)
<P>
         ! Basic usage:
            ! the product of the elements of an array
            arr=[1, 2, 3, 4 ]
            write(*,*) arr
            write(*,*) &#146;product=&#146;, reduce(arr, my_mult)
            write(*,*) &#146;sum=&#146;, reduce(arr, my_sum)
<P>
         ! Examples of masking:
            ! the product of only the positive elements of an array
            arr=[1, -1, 2, -2, 3, -3 ]
            write(*,*)&#146;positive value product=&#146;,reduce(arr, my_mult, mask=arr&gt;0)
         ! sum values ignoring negative values
            write(*,*)&#146;sum positive values=&#146;,reduce(arr, my_sum, mask=arr&gt;0)
<P>
         ! a single-valued array returns the single value as the
         ! calls to the operator stop when only one element remains
            arr=[ 1234 ]
            write(*,*)&#146;single value sum&#146;,reduce(arr, my_sum )
            write(*,*)&#146;single value product&#146;,reduce(arr, my_mult )
<P>
         ! Example of operations along a dimension:
         !  If B is the array   1 3 5
         !                      2 4 6
            b=reshape([1,2,3,4,5,6],[2,3])
            write(*,f) REDUCE(B, MY_MULT),&#146;should be [720]&#146;
            write(*,f) REDUCE(B, MY_MULT, DIM=1),&#146;should be [2,12,30]&#146;
            write(*,f) REDUCE(B, MY_MULT, DIM=2),&#146;should be [15, 48]&#146;
<P>
         contains
<P>
         pure function my_mult(a,b) result(c)
         integer,intent(in) :: a, b
         integer            :: c
            c=a*b
         end function my_mult
<P>
         pure function my_sum(a,b) result(c)
         integer,intent(in) :: a, b
         integer            :: c
            c=a+b
         end function my_sum
<P>
         end program demo_reduce
<P>
</PRE>
Results:
<P>
<PRE>
           &gt;  1 2 3 4
           &gt;  product= 24
           &gt;  sum=     10
           &gt;  positive value sum= 6
           &gt;  sum positive values= 6
           &gt;  single value sum     1234
           &gt;  single value product 1234
           &gt; [720, should be [720],
           &gt; [2, 12, 30, should be [2,12,30],
           &gt; [15, 48, should be [15, 48],
<P>
</PRE>
</BLOCKQUOTE>
<A name=7>

     <H3>STANDARD</H3>

</A>
<BLOCKQUOTE>
Fortran 2018
</BLOCKQUOTE>
<A name=8>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
co_reduce(3)
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=9>

     <H3>RESOURCES</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
associative:wikipedia
</TD></TR>
<TR></TR></TABLE>fortran-lang intrinsic descriptions (license: MIT) @urbanjost
<P>
<PRE>
                               November 07, 2022              reduce(3fortran)
</PRE>
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>Nemo Release 3.1</I></TD> <TD width=33% align=center>reduce (3)</TD> <TD align=right width=33%><I>February 12, 2023</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from e3de04b6-e9a3-4968-b1e5-18f2fc38b2f9 using man macros.</FONT>
<br><br><center><img src="images/reduce.3fortran.gif"></center>
</div>
</div>
</body>
</HTML>
