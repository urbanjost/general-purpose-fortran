<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco, monospace }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:0.1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 0.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<!--
<h5><a href="index.html">[UP]</a></h5>
<button type="button" onclick="javascript:history.back()">Back</button>
-->
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>C Library Functions &nbsp;-&nbsp;</I><NOBR>M_color (3)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
M_color(3) - [M_color::INTRO] a Fortran module that lets you
convert between common color models (LICENSE:PD)
<P>
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Examples</A><BR>
<A HREF=#4>References</A><BR>
<A HREF=#5>Author</A><BR>
<A HREF=#6>License</A><BR>
</BLOCKQUOTE>
<A name=7>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<P>
use M_color, only : &
<P>
<PRE>
      & hue, &
      & closest_color_name, &
      & color_name2rgb, &
      & rgbmono
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
Highly accurate color conversions are a tricky business, and color
is a complex topic; but the simplified translations between common
color models found here work quite well for basic conversions.
<P>
Typically the only user routine called is HUE(3f). HUE(3f) is
a single routine that interfaces to all the private low-level
color conversion routines to convert a color&#146;s components from
one color model to another. HUE(3f) converts between the
following color models:
<TABLE cellpadding=3><!-- tsb: Typically the only user routine called is HUE(3f). HUE(3f) is
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=6% nowrap>
<B>RGB:</B> </TD><TD valign=bottom>
Red, Green, Blue (color TV monitors)
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>HLS:</B> </TD><TD valign=bottom>
Hue, Lightness, Saturation
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>CMY:</B> </TD><TD valign=bottom>
Cyan, Magenta, Yellow (pigment-based printing devices)
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>HSV:</B> </TD><TD valign=bottom>
Hue, Saturation, Value
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>YIQ:</B> </TD><TD valign=bottom>
Broadcast TV color system
</TD></TR>
<TR><TD colspan=2>
In addition to those reversible color model conversions there
are:
</TD></TR>
<TR valign=top><TD colspan=2>
<B>CLOSEST_COLOR_NAME(3f):</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
given RGB values, try to find closest
named color.
</TD></TR>
<TR valign=top><TD colspan=2>
<B>COLOR_NAME2RGB(3f):</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
given a standard color name, return RGB color
values in range 0 to 100.
</TD></TR>
<TR valign=top><TD colspan=2>
<B>RGBMONO(3f):</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
convert RGB colors to a reasonable grayscale
(non-reversible).
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; DESIGN OF THE MODULE</H4>
</A>
<BLOCKQUOTE>
<P>
The rest of the library is composed of PRIVATE procedures. Internally
for each color model supported the general idea of the module is that
there are two routines for each color model:
<TABLE cellpadding=3><!-- tsb: The rest of the library is composed of PRIVATE procedures. Internally
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
One converts that model to the RGB model
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
The other converts from RGB to that model
</TD></TR>
<TR></TR></TABLE>This allows conversions between all color models with only 2*N
routines. That is, to go from model A to model B the module
would internally make two calls:
<P>
<PRE>
       call modelA2rgb(&#46;&#46;&#46;)
       call rgb2modelB(&#46;&#46;&#46;)
<P>
</PRE>
The resulting internal routines are:
<TABLE cellpadding=3><!-- tsb: The resulting internal routines are:
 -->
<TR></TR><TR></TR>
<TR valign=top><TD colspan=2>
<B>HLSRGB:</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
given hue, lightness, saturation calculate red,
green, and blue components
<TABLE width=100% cellpadding=3><!-- tsb: given hue, lightness, saturation calculate red,
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
RGBVAL ensures a value is in the appropriate range and
quadrant
</TD></TR>
<TR></TR></TABLE><!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<B>HVSRGB:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given hue, saturation, value calculate red, green,
and blue components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>CMYRGB:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given cyan, magenta, yellow components calculate
red, green, blue components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>YIQRGB:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given luma(gray scale), orange-blue chrominance,
and purple-green chrominance components calculate red, green,
and blue components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>RGBHVS:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given red, green, blue values calculate hue, value,
and saturation components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>RGBHLS:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given red, green, blue values calculate hue,
lightness, and saturation components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>RGBCMY:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given red, green, blue values calculate cyan,
magenta, yellow components
</TD></TR>
<TR valign=top><TD colspan=2>
<B>RGBYIQ:</B> </TD></TR><TR valign=top><TD width=3%>&nbsp;</TD><TD>
given red, green, blue values calculate luma(gray
scale), orange-blue chrominance, and purple-green chrominance
components
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=3>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
Sample program:
<P>
<PRE>
   program demo_M_color
   use M_color, only : hue
   use M_color, only : closest_color_name
   use M_color, only : color_name2rgb
   use M_color, only : rgbmono
   implicit none
   character(len=100) :: string ! at least 20 characters
   character(len=20)  :: echoname
   real               :: red,green,blue
   real               :: gray
   integer            :: ierr
      ! find the names of colors given RGB values
      write(*,*)&#146;Find names given values&#146;
<P>
      call closest_color_name( 100.0,   0.0,   0.0, string)
      write(*,*)trim(string)
<P>
      call closest_color_name(   0.0, 100.0,   0.0, string)
      write(*,*)trim(string)
<P>
      call closest_color_name(   0.0,   0.0, 100.0, string)
      write(*,*)trim(string)
<P>
      ! list colors known to colorname2rgb(3f) & corresponding RGB values
      write(*,*)&#146;given names find RGB values&#146;
      ! get the RGB values and English name of the color
      call color_name2rgb(&#146;RED&#146;,red,green,blue,echoname)
      ! display the English name and RGB values for the name
      write(*,*)echoname,int([red,green,blue])
<P>
      write(*,*)&#146;Do some conversions between RGB, HLS, and HLS&#146;
      write(*,*)&#146;and check them against expected values&#146;
      !               NAME        RGB(0-255)            HLS(0-100)
      call chk(&#146;hls&#146;,&#146;red&#146;,     [100, 0,   0  ], [0,   50,  100])
      call chk(&#146;hls&#146;,&#146;orange&#146;,  [100, 65,  0  ], [39,  50,  100])
      call chk(&#146;hls&#146;,&#146;yellow&#146;,  [100, 100, 0  ], [60,  50,  100])
      call chk(&#146;hls&#146;,&#146;green&#146;,   [0,   100, 0  ], [120, 50,  100])
      call chk(&#146;hls&#146;,&#146;cyan&#146;,    [0,   100, 100], [180, 50,  100])
      call chk(&#146;hls&#146;,&#146;blue&#146;,    [0,   0,   100], [240, 50,  100])
      call chk(&#146;hls&#146;,&#146;magenta&#146;, [100, 0,   100], [300, 50,  100])
      call chk(&#146;hls&#146;,&#146;black&#146;,   [0,   0,   0  ], [0,   0,   0  ])
      call chk(&#146;hls&#146;,&#146;white&#146;,   [100, 100, 100], [0,   100, 0  ])
      !               NAME        RGB(0-255)           HSV(0-100)
      call chk(&#146;hsv&#146;,&#146;red&#146;,     [100, 0,   0  ], [0,   100, 100])
      call chk(&#146;hsv&#146;,&#146;yellow&#146;,  [100, 100, 0  ], [60,  100, 100])
      call chk(&#146;hsv&#146;,&#146;green&#146;,   [0,   100, 0  ], [120, 100, 100])
      call chk(&#146;hsv&#146;,&#146;cyan&#146;,    [0,   100, 100], [180, 100, 100])
      call chk(&#146;hsv&#146;,&#146;blue&#146;,    [0,   0,   100], [240, 100, 100])
      call chk(&#146;hsv&#146;,&#146;magenta&#146;, [100, 0,   100], [300, 100, 100])
      call chk(&#146;hsv&#146;,&#146;white&#146;,   [100, 100, 100], [0,   0,   100])
      call chk(&#146;hsv&#146;,&#146;black&#146;,   [0,   0,   0  ], [0,   0,   0  ])
      call chk(&#146;hsv&#146;,&#146;gray50&#146;,  [50,  50,  50 ], [0,   0,   50 ])
      call chk(&#146;hsv&#146;,&#146;silver&#146;,  [75,  75,  75 ], [0,   0,   75 ])
      call chk(&#146;hsv&#146;,&#146;red4&#146;,    [55,  0,   0  ], [0,   100, 55 ])
      call chk(&#146;hsv&#146;,&#146;olive&#146;,   [50,  50,  0  ], [60,  100, 50 ])
      call chk(&#146;hsv&#146;,&#146;lime&#146;,    [0,   100, 0  ], [120, 100, 100])
      call chk(&#146;hsv&#146;,&#146;teal&#146;,    [0,   50,  50 ], [180, 100, 50 ])
      call chk(&#146;hsv&#146;,&#146;navy&#146;,    [0,   0,   50 ], [240, 100, 50 ])
      call chk(&#146;hsv&#146;,&#146;purple&#146;,  [63,  13,  94 ], [277, 87,  94 ])
      call chk(&#146;hsv&#146;,&#146;magenta4&#146;,[55,  0,   55 ], [300, 100, 55 ])
      call chk(&#146;hsv&#146;,&#146;maroon&#146;,  [69,  19,  38 ], [338, 73,  69 ])
<P>
      write(*,*)&#146;Get some grayscale values from RGB color values&#146;
      call rgbmono(100.,  0.,  0.,gray,ierr);write(*,*)&#146;red     &#146;,gray
      call rgbmono(  0.,100.,  0.,gray,ierr);write(*,*)&#146;green   &#146;,gray
      call rgbmono(  0.,  0.,100.,gray,ierr);write(*,*)&#146;blue    &#146;,gray
      call rgbmono(100.,100.,  0.,gray,ierr);write(*,*)&#146;Yellow  &#146;,gray
      call rgbmono(  0.,100.,100.,gray,ierr);write(*,*)&#146;Cyan    &#146;,gray
      call rgbmono(100.,  0.,100.,gray,ierr);write(*,*)&#146;Magenta &#146;,gray
      call rgbmono(100.,100.,100.,gray,ierr);write(*,*)&#146;White   &#146;,gray
      call rgbmono( 00.,  0.,  0.,gray,ierr);write(*,*)&#146;Black   &#146;,gray
      call rgbmono( 50.,  0.,  0.,gray,ierr);write(*,*)&#146;Maroon  &#146;,gray
      call rgbmono(100., 50., 50.,gray,ierr);write(*,*)&#146;Pink    &#146;,gray
      contains
      subroutine chk(modelout,name,rgb,other)
      ! given a color convert to MODELOUT and compare to expected values
      character(len=*),intent(in)   :: name
      integer,intent(in)            :: rgb(3), other(3)
      character(len=*),intent(in)   :: modelout
      real                          :: val1,val2,val3
      integer                       :: status
         ! convert RGB values to MODELOUT values
         call hue(&#146;rgb&#146;,REAL(rgb(1)),REAL(rgb(2)),REAL(rgb(3)),&
         & modelout,val1,val2,val3,status)
         ! left-justify name to 10 characters or more
         write(*,&#146;(a,1x)&#146;,advance=&#146;no&#146;) &
         & [ character(len=max(10,len_trim(name))) ::&#146; &#146;//trim(name)]
         write(*,&#146;(a,1x,3(i3,1x))&#146;,advance=&#146;no&#146;) &
         & modelout//&#146; EXPECTED&#146;,other
         write(*,&#146;(a,1x,3(i3,1x))&#146;,advance=&#146;no&#146;) &
         & &#146;GOT&#146;,int([val1+0.5,val2+0.5,val3+0.5])
         write(*,&#146;(a,i0)&#146;)&#146;STATUS &#146;,status
      end subroutine chk
   end program demo_M_color
<P>
</PRE>
</BLOCKQUOTE>
<A name=4>

     <H3>REFERENCES</H3>

</A>
<BLOCKQUOTE>
The algorithms are based on chapter 17 of "Fundamentals of
Interactive Computer Graphics"; J. D. Foley and A. Van Dam.
</BLOCKQUOTE>
<A name=5>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
John S. Urban
</BLOCKQUOTE>
<A name=6>

     <H3>LICENSE</H3>

</A>
<BLOCKQUOTE>
Public Domain
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>Nemo Release 3.1</I></TD> <TD width=33% align=center>M_color (3)</TD> <TD align=right width=33%><I>December 14, 2024</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from b1efc252-b0a8-4739-810a-5fcaf86637dd using man macros.</FONT>
<br><br><center><img src="images/M_color.3m_color.gif"></center>
</div>
</div>
</body>
</HTML>
