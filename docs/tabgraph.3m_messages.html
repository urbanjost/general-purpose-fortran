<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 1.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<h5><a href="index.html">[UP]</a></h5>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>tabgraph (3)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<B>tabgraph</B>(3f) - [M_messages] write out a row of numbers and a text-based scaled graph
(LICENSE:PD)
<P>
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Options</A><BR>
<A HREF=#4>Example</A><BR>
<A HREF=#5>Notes</A><BR>
<A HREF=#6>Author</A><BR>
<A HREF=#7>License</A><BR>
</BLOCKQUOTE>
<A name=8>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
SUBROUTINE <B>tabgraph</B>(ctmp,array,ivals,rmin,rmax,cfill,ilen)
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<P>
Given a max and min value for setting up a range
write out a series of real numbers with a text-based graph scale appended.
Each column of numbers is written with a format of "1x,g14.7", taking up
15 characters per number.
<P>
Given an array of numbers in <B>ARRAY</B>(IVALS),
<BLOCKQUOTE>
<TABLE cellpadding=3><!-- tsb: Given an array of numbers in <B>ARRAY</B>(IVALS),
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=4%>
1.
</TD><TD>
write the numbers into string CTMP with a scale appended to the right
that depicts the relative ranges of the numbers.
</TD></TR>
<TR valign=top><TD width=4%>
2.
</TD><TD>
RMIN and RMAX are the minimum and maximum numbers to determine
where <B>ARRAY</B>(2) thru <B>ARRAY</B>(IVALS) go on the scale graph.
<B>ARRAY</B>(1) is printed but is not plotted unless IVALS is less than or
equal to one (1), on the assumption that it is the X values and the
other columns are Y values.
<B>ABS</B>(IVALS) is the number of numbers in array. Negative numbers flag
that <B>ARRAY</B>(1) should be plotted too.
</TD></TR>
<TR valign=top><TD width=4%>
3.
</TD><TD>
CFILL is the character to fill the scale with as a background
character
</TD></TR>
<TR valign=top><TD width=4%>
4.
</TD><TD>
ILEN is the number of characters to use for the scale region.
If set to 0, it pads out to 132 columns unless the scale would be
less than 15 characters wide; then it pads out to 255 characters
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
Each number takes up 15 columns on output.
<P>
Could stand being made more generic and/or robust. Maybe label max
and min values, draw a vertical line at 0 or some reference value,
check if I/O errors occur many times and stop putting out message
(some platforms probably won&#146;t like really wide lines), and put a
marker for values that should be off scale (and so on).
<P>
It is assumed that from this, you can easy make a routine that, given
all of curves at once, finds max and min and loops calling tabgraph.
</BLOCKQUOTE>
<A name=3>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<P>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=6% nowrap>
<B>CC</B> </TD><TD valign=bottom>
is the string to fill and return with the "graph"
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>ARRAY</B> </TD><TD valign=bottom>
is the list of numbers to put into the graph
</TD></TR>
<TR valign=top><TD colspan=2>
<B>IVALUES0</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
is the number of numbers in array; if &lt; 2 then take <B>abs</B>(ivalues0)
and show first column. Else assume first column is X values and should not
be added to scale.
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>RMIN</B> </TD><TD valign=bottom>
is the min value for the scale.
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>RMAX</B> </TD><TD valign=bottom>
is the max value for the scale.
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>FILL</B> </TD><TD valign=bottom>
is the character to fill the scale with as a background.
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>ILEN0</B> </TD><TD valign=bottom>
is the width of the scale in characters.
0=&gt; fit into line of 132 characters unless scale becomes narrower
than ICMIN characters, then fit into 255 character line.)
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=4>

     <H3>EXAMPLE</H3>

</A>
<BLOCKQUOTE>
<P>
Sample program:
<P>
<PRE>
     program demo_tabgraph
     use M_messages, only : tabgraph
     implicit none
     character(len=500) :: ctmp
     integer            :: i10, i20
     real               :: array(4)
     integer            :: ilen
     do i20=1,4
        do i10=1,400
           array(1)=i10*12/100.0
           array(2)=sin(array(1))
           array(3)=cos(array(1))
           if(i20.eq.1)then
           ! fixed width of 50 for scale
              call tabgraph(ctmp,array,3,-1.0,1.0,&#146; &#146;,50)
              ! ctmp  --&gt; CTMP string to fill
              ! array --&gt; ARRAY data
              ! 3     --&gt; IVALS
              !-1     --&gt; RMIN
              ! 1     --&gt; RMAX
              !&#146; &#146;    --&gt; CFILL
              !50     --&gt; ILEN
           elseif(i20.eq.2)then
           ! fixed width of 90 for scale with a non-blank fill character
              call tabgraph(ctmp,array,3,-1.0,1.0,&#146;.&#146;,90)
           elseif(i20.eq.3)then
           ! 0 len auto-sizes scale region
              call tabgraph(ctmp,array,3,-1.0,1.0,&#146; &#146;,0)
           elseif(i20.eq.4)then
           ! number of values less than or equal to 1
              call tabgraph(ctmp,array,1,0.0,48.0,&#146; &#146;,0)
           endif
           if(i10.eq.1)then
              ilen=len_trim(ctmp)
              ilen=max(ilen,1)
           endif
           write(*,&#146;(a)&#146;)ctmp(1:ilen) ! tabgraph test program
           ! write(*,&#146;(i5,a)&#146;)i10,ctmp(1:ilen) write with a number count
        enddo
     enddo
     end program demo_tabgraph
<P>
</PRE>
</BLOCKQUOTE>
The purpose of this routine becomes much clearer when looking at a sample
output. The third pass thru loop 20 in the test code above will produce:
<P>
<P>
<PRE>
  0.1200000      0.1197122      0.9928086    #                                               1                                    2#
  0.2400000      0.2377026      0.9713380    #                                                    1                              2 #
  0.3600000      0.3522742      0.9358968    #                                                        1                        2   #
  0.4800000      0.4617792      0.8869949    #                                                             1                 2     #
  0.6000000      0.5646425      0.8253356    #                                                                 1           2       #
  0.7200000      0.6593847      0.7518057    #                                                                      1  2           #
  0.8400000      0.7446431      0.6674628    #                                                                      2  1           #
  0.9600000      0.8191916      0.5735200    #                                                                  2         1        #
   1.080000      0.8819578      0.4713283    #                                                              2                1     #
   1.200000      0.9320391      0.3623577    #                                                         2                       1   #
   1.320000      0.9687151      0.2481754    #                                                    2                              1 #
   1.440000      0.9914584      0.1304237    #                                               2                                    1#
   1.560000      0.9999417      0.1079617E-01#                                          2                                         1#
   1.680000      0.9940432     -0.1089867    #                                     2                                              1#
   1.800000      0.9738476     -0.2272020    #                                2                                                  1 #
   1.920000      0.9396455     -0.3421496    #                           2                                                     1   #
   2.040000      0.8919287     -0.4521761    #                      2                                                        1     #
   2.160000      0.8313834     -0.5556992    #                  2                                                          1       #
   2.280000      0.7588807     -0.6512296    #              2                                                           1          #
   2.400000      0.6754631     -0.7373938    #          2                                                           1              #
   2.520000      0.5823306     -0.8129520    #       2                                                          1                  #
   2.640000      0.4808225     -0.8768179    #    2                                                         1                      #
   2.760000      0.3723991     -0.9280727    #  2                                                      1                           #
   2.880000      0.2586192     -0.9659793    #2                                                   1                                #
   3.000000      0.1411200     -0.9899925    #2                                              1                                     #
   3.120000      0.2159109E-01 -0.9997669    #2                                         1                                          #
   3.240000     -0.9824860E-01 -0.9951619    #2                                    1                                               #
   3.360000     -0.2166750     -0.9762438    #2                               1                                                    #
   3.480000     -0.3319852     -0.9432846    # 2                         1                                                         #
   3.600000     -0.4425204     -0.8967584    #   2                   1                                                             #
   3.720000     -0.5466911     -0.8373344    #      2           1                                                                  #
   3.840000     -0.6429987     -0.7658673    #         2    1                                                                      #
   3.960000     -0.7300584     -0.6833848    #          1 2                                                                        #
   4.080000     -0.8066177     -0.5910735    #       1        2                                                                    #
   4.200000     -0.8715757     -0.4902610    #    1                2                                                               #
   4.320000     -0.9239982     -0.3823968    #  1                      2                                                           #
   4.440000     -0.9631310     -0.2690330    # 1                            2                                                      #
   4.560000     -0.9884112     -0.1517999    #1                                  2                                                 #
   4.680000     -0.9994755     -0.3238349E-01#1                                       2                                            #
   4.800000     -0.9961646      0.8749917E-01#1                                            2                                       #
   4.920000     -0.9785261      0.2061229    #1                                                 2                                  #
   5.040000     -0.9468138      0.3217820    # 1                                                     2                             #
   5.160000     -0.9014837      0.4328130    #   1                                                        2                        #
   5.280000     -0.8431876      0.5376194    #      1                                                         2                    #
   5.400000     -0.7727644      0.6346930    #         1                                                          2                #
   5.520000     -0.6912268      0.7226379    #            1                                                           2            #
   5.640000     -0.5997474      0.8001894    #                1                                                           2        #
   5.760000     -0.4996417      0.8662322    #                    1                                                         2      #
   5.880000     -0.3923501      0.9198160    #                         1                                                       2   #
   6.000000     -0.2794155      0.9601703    #                              1                                                   2  #
   6.120000     -0.1624621      0.9867148    #                                   1                                               2 #
   6.240000     -0.4317211E-01  0.9990677    #                                        1                                           2#
   6.360000      0.7673930E-01  0.9970512    #                                             1                                      2#
   6.480000      0.1955465      0.9806944    #                                                  1                                2 #
   6.600000      0.3115413      0.9502326    #                                                       1                          2  #
   6.720000      0.4230552      0.9061039    #                                                           1                    2    #
   6.840000      0.5284849      0.8489427    #                                                                1             2      #
   6.960000      0.6263130      0.7795717    #                                                                    1      2         #
   7.080000      0.7151332      0.6989882    #                                                                       21            #
   7.200000      0.7936677      0.6083515    #                                                                   2       1         #
   7.320000      0.8607875      0.5089645    #                                                               2              1      #
   7.440000      0.9155264      0.4022577    #                                                           2                    1    #
   7.560000      0.9570977      0.2897654    #                                                      2                           1  #
   7.680000      0.9849033      0.1731054    #                                                 2                                 1 #
   7.800000      0.9985434      0.5395523E-01#                                            2                                       1#
   7.920000      0.9978216     -0.6597050E-01#                                       2                                            1#
   8.040000      0.9827484     -0.1849474    #                                  2                                                1 #
   8.160000      0.9535407     -0.3012642    #                             2                                                    1  #
   8.280000      0.9106185     -0.4132481    #                        2                                                       1    #
   8.400000      0.8545991     -0.5192883    #                   2                                                          1      #
   8.520000      0.7862877     -0.6178606    #               2                                                           1         #
   8.640000      0.7066678     -0.7075455    #           2                                                            1            #
      :
      :
      :
<P>
</PRE>
<A name=5>

     <H3>NOTES</H3>

</A>
<BLOCKQUOTE>
<P>
TABGRAPH makes it very easy to find values in particular ranges in printed output.
Works particularly well with the once-ubiquitous fan-fold paper.
</BLOCKQUOTE>
<A name=6>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
John S. Urban
</BLOCKQUOTE>
<A name=7>

     <H3>LICENSE</H3>

</A>
<BLOCKQUOTE>
Public License
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I></I></TD> <TD width=33% align=center>tabgraph (3)</TD> <TD align=right width=33%><I>September 01, 2021</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from bd77ab10-4ee1-49c2-b0c2-3215d84f5e92 using man macros.</FONT>
<br><br><center><img src="images/tabgraph.3m_messages.gif"></center>
</div>
</div>
</body>
</HTML>
