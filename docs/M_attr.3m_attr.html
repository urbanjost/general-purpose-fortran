<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 1.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<h5><a href="index.html">[UP]</a></h5>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>M_attr (3)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<B>M_attr</B>(3f) - [M_attr] control text attributes on terminals
(LICENSE:MIT)
<P>
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Access</A><BR>
<A HREF=#4>Limitations</A><BR>
<A HREF=#5>Example</A><BR>
<A HREF=#6>Author</A><BR>
<A HREF=#7>License</A><BR>
<A HREF=#8>See Also</A><BR>
</BLOCKQUOTE>
<A name=9>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
core functions
<P>
<PRE>
     ! Add text attributes like color with an HTML-like syntax
     use M_attr, only : attr
     ! suppress the escape sequence output
     use M_attr, only : attr_mode
     ! customize what output strings are produced
     use M_attr, only : attr_update
<P>
</PRE>
for generating standard messages
<P>
<PRE>
     use M_attr, only : alert
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<B>M_attr</B>(3f) is a Fortran module that writes common ANSI escape sequences
which control terminal text attributes. It is designed to allow the
sequences to be suppressed when desired and for the user program to
completely customize the keywords -- the user can add, delete and
replace the sequences associated with a keyword without changing
the code.
<P>
Attributes are specified by writing lines with HTML-like structure.
<P>
The advantage of the approach of replacing in-band escape sequences
with formatting directives contained on each line is that it is easy
to turn off when running batch, but more importantly your program can
be run in "raw" mode and write a clean text file with the directives in
it that can then be read back in by a simple filter program that strips
it back to plain <B>text</B>( see app/plain.f90), or displays it to a screen
in <B>color</B>(see app/light.f90) or perhaps converts it to another format.
<P>
By making each line self-contained (by default) this can still be done
with any arbitrarily selected group of lines from the file.
<P>
So this module makes it trivial to read specially-formatted data
from a file like a message catalog (perhaps with various versions
in different languages) and colorize it or display it as plain text
using the <B>attr</B>(3f) procedure.
</BLOCKQUOTE>
<A name=3>

     <H3>ACCESS</H3>

</A>
<BLOCKQUOTE>
Via <B>git</B>(1):
<P>
<PRE>
       git clone https://github.com/urbanjost/M_attr.git
       cd M_attr/src
       # change Makefile if not using one of the listed compilers
       make clean; make gfortran    # for gfortran
       make clean; make ifort       # for ifort
       make clean; make nvfortran   # for nvfortran
<P>
</PRE>
This will compile the M_attr module and example programs.
<P>
Via fpm ( described at https://github.com/fortran-lang/fpm):
<P>
<PRE>
        git clone https://github.com/urbanjost/M_attr.git
<P>
</PRE>
or just list it as a dependency in your fpm.toml project file.
<P>
<PRE>
        [dependencies]
        M_attr        = { git = "https://github.com/urbanjost/M_attr.git" }
<P>
</PRE>
</BLOCKQUOTE>
<A name=4>

     <H3>LIMITATIONS</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
colors are not nestable.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
keywords are case-sensitive,
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
ANSI escape sequences are not universally supported by
all terminal emulators; and normally should be suppressed
when not going to a tty device. Therefore, you should use
<B>M_system::system_istty</B>(3f) or the common Fortran extension
<B>ISATTY</B>() to set the default to "plain" instead of "color"
when the output file is not a conforming terminal. On basic
MSWindows console windows, it is best to use Windows 10+ and/or
the Linux mode; you may have to enable ANSI escape sequence
mode on MSWindows. It does work as-is with CygWin and MinGW and
Putty windows and <B>mintty</B>(1) as tested.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>EXAMPLE</H3>

</A>
<BLOCKQUOTE>
Sample program
<P>
<PRE>
    program demo_M_attr
    use M_attr, only : attr, attr_mode, attr_update, alert
    implicit none
    character(len=256) :: line
    character(len=*),parameter :: f=&#146;( &
     &"   &lt;bo&gt;&lt;w&gt;&lt;G&gt; GREAT: &lt;/G&gt;&lt;/w&gt;&
     &The new value &lt;Y&gt;&lt;b&gt;",f8.4,1x,"&lt;/b&gt;&lt;/Y&gt; is in range"&
     &)&#146;
    real :: value
<P>
       write(*,&#146;(a)&#146;)&
       &attr(&#146;   &lt;r&gt;&lt;W&gt;&lt;bo&gt; ERROR: &lt;/W&gt;red text on a white background&lt;/y&gt;&#146;)
<P>
       value=3.4567
       write(line,fmt=f) value
       write(*,&#146;(a)&#146;)attr(trim(line))
<P>
       ! write same string as plain text
       write(*,*)
       call attr_mode(manner=&#146;plain&#146;)
       write(*,&#146;(a)&#146;)attr(trim(line))
<P>
       call attr_mode(manner=&#146;color&#146;)
       ! use pre-defined or user defined strings
       write(*,*)
       write(*,&#146;(a)&#146;)attr(&#146;&lt;ERROR&gt; Woe is nigh.&#146;)
       write(*,&#146;(a)&#146;)attr(&#146;&lt;WARNING&gt; The night is young.&#146;)
       write(*,&#146;(a)&#146;)attr(&#146;&lt;INFO&gt; It is Monday&#146;)
<P>
       call alert(&#146;&lt;ERROR&gt;&#146;, &#146;Woe is nigh.&#146;)
       call alert(&#146;&lt;WARNING&gt;&#146;, &#146;The night is young.&#146;)
       call alert(&#146;&lt;INFO&gt;&#146;, &#146;It is Monday&#146;)
<P>
       ! create a custom mnemonic
       call attr_update(&#146;MYERROR&#146;,attr(&
       &#146; &lt;R&gt;&lt;e&gt; E&lt;w&gt;-&lt;e&gt;R&lt;w&gt;-&lt;e&gt;R&lt;w&gt;-&lt;e&gt;O&lt;w&gt;-&lt;e&gt;R: &lt;/e&gt;&lt;/R&gt;&lt;/bo&gt;&#146;&
       ))
       write(*,*)
       write(*,&#146;(a)&#146;)attr(&#146;&lt;MYERROR&gt; my custom message style&#146;)
<P>
</PRE>
<BLOCKQUOTE>
end program demo_M_attr
</BLOCKQUOTE>
</BLOCKQUOTE>
<A name=6>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
John S. Urban, 2021
</BLOCKQUOTE>
<A name=7>

     <H3>LICENSE</H3>

</A>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; MIT</H4>
</A>
<BLOCKQUOTE>
<P>
</BLOCKQUOTE>
<A name=8>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<B>attr</B>(3f), <B>attr_mode</B>(3f), <B>attr_update</B>(3f)
<P>
Related information:
<P>
<PRE>
    terminfo(3c), termlib(3c), tput(1), reset(1), clear(1),
    console_codes(4), ECMA-48,
    https://en.wikipedia.org/wiki/ANSI_escape_code
</PRE>
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I></I></TD> <TD width=33% align=center>M_attr (3)</TD> <TD align=right width=33%><I>October 17, 2021</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from f7bca4bd-a43b-4aae-a233-11c85ef3034d using man macros.</FONT>
<br><br><center><img src="images/M_attr.3m_attr.gif"></center>
</div>
</div>
</body>
</HTML>
