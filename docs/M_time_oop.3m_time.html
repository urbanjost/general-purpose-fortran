<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:0.1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 0.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<h5><a href="index.html">[UP]</a></h5>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>C Library Functions &nbsp;-&nbsp;</I><NOBR>M_time_oop (3)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<B>M_time_oop</B>(3fm) - [M_time::OBJECT_ORIENTED] OOP interface for <B>M_time</B>(3fm)
(LICENSE:PD)
<P>
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Example</A><BR>
</BLOCKQUOTE>
<A name=4>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<B>use</B> M_time_oop, <I>only</I> : <I>date_time</I>
<P>
<PRE>
   use M_time_oop,only : operator(+),operator(-),operator(&gt;),operator(&lt;)
   use M_time_oop,only : operator(&lt;=),operator(&gt;=),operator(==),operator(/=)
<P>
   TYPE(date_time) :: mydate
<P>
      mydate%year
      mydate%month
      mydate%day
      mydate%tz
      mydate%hour
      mydate%minute
      mydate%second
      mydate%millisecond
<P>
      call mydate%init()
<P>
      mydate%format(&#146;&#146;)
      mydate%ordinal()
      mydate%weekday()
      mydate%epoch()
      mydate%julian()
      dat=mydate%datout()
      mydate%delta(year=NN, month=NN, day=NN, tz=NN, hour=NN, minute=NN,
      second=NN, millisecond=NN, week=NN, duration=&#146;DD-HH:MM:SS.XX&#146;)
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
An object-oriented interface to the M_time module. The following
example program demonstrates and documents the interface
</BLOCKQUOTE>
<A name=3>

     <H3>EXAMPLE</H3>

</A>
<BLOCKQUOTE>
<P>
sample program
<P>
<PRE>
    program demo_M_time_oop
    !
    ! This is an example using the object-oriented class/type model
    ! This is essentially the same functionality as the procedures
    ! in the procedural module M_time(3fm), but allows for Object Oriented syntax:
    !
    use M_time_oop,only : date_time
    !!use M_time_oop,only : operator(+),operator(-),operator(&gt;),operator(&lt;)
    !!use M_time_oop,only : operator(&lt;=),operator(&gt;=),operator(==),operator(/=)
    implicit none
    integer         :: dat(8)
    TYPE(date_time) :: event
    TYPE(date_time) :: otherdate
    TYPE(date_time) :: answer
<P>
    character(len=*),parameter :: iso_fmt=&#146;%Y-%M-%DT%h:%m:%s.%x%z&#146;
       ! DIFFERENT INITIALIZATION STYLES
       ! (Still debating on how best to do this)
       write(*,*)
       write(*,&#146;(a)&#146;)&#146;Various initialization styles&#146;
<P>
       ! DEFINE type(date_time) WITH CONSTRUCTOR
       otherdate=date_time()
       print *,&#146;DEFAULT CONSTRUCTOR %format()               &#146;,&
       & otherdate%format()
       print *,&#146;DEFAULT CONSTRUCTOR %format("")             &#146;,&
       & otherdate%format("")
       print *,&#146;DEFAULT CONSTRUCTOR %format(user-specified) &#146;,&
       & otherdate%format(iso_fmt)
       print *,&#146;DEFAULT CONSTRUCTOR %format("USA")          &#146;,&
       & otherdate%format("USA")
<P>
       otherdate=date_time(1492,10,12,0,0,0,0,0)
       print *,&#146;DEFAULT CONSTRUCTOR setting values          &#146;,&
       & otherdate%format()
<P>
       otherdate=date_time(2016,6,11)
       print *,&#146;DEFAULT CONSTRUCTOR with partial values     &#146;,&
       & otherdate%format()
<P>
       otherdate=date_time(year=2016,month=6,day=11,tz=-240,&
       & hour=21,minute=09,second=11,millisecond=500)
       print *,&#146;DEFAULT CONSTRUCTOR with values by name     &#146;,&
       & otherdate%format()
<P>
       otherdate=date_time([1776,7,4,0,0,0,0,0])
       print *,&#146;CONSTRUCTOR with a dat array                &#146;,&
       & otherdate%format()
<P>
       otherdate=date_time([1776,7,4])
       print *,&#146;CONSTRUCTOR with a partial dat array        &#146;,&
       & otherdate%format()
<P>
       ! the init() method supports several methods
       ! initialize to current time using INIT
       call otherdate%init()
       ! initialize to current time using INIT
       call otherdate%init(type="now")
<P>
       ! initialize to beginning of Unix Epoch Time
       call otherdate%init(type="epoch")
       ! Note
       ! currently, DATE_TIME DATE array is set to Unix Epoch
       ! start USING LOCAL TIMEZONE
       ! whereas default constructor is using default of Unix Epoch
       ! start using Z time (GMT or UTC time)
<P>
       ! initialize with a DAT array using INIT,
       ! compatible with DATE_AND_TIME VALUES(8)
       call otherdate%init(dat=[1970,1,1,0,0,0,0,0])
       ! using INIT with ordered values
       call otherdate%init(2016,6,11,-300,23,1,0,0)
       ! using INIT with names
       call otherdate%init(year=2016,month=6,day=11,&
       & tz=-300,hour=23,minute=1,second=0,millisecond=0)
       !
       ! take current date and exercise the OOP interface
       ! initialize to current time using INIT
       call event%init()
       write(*,*)
       write(*,*)&#146;Print members of type(DATE_TIME)&#146;
       ! show derived type
       write(*,404)&#146;EVENT=&#146;,event
       404 format(1x,a,i0,*(",",i0:))
<P>
       ! MEMBERS ( basic time values are all integers)
       ! print members of type
       write(*,101)&#146;%year        Year&#46;&#46;&#46;................ &#146;,event%year
       write(*,101)&#146;%month       Month&#46;&#46;&#46;............... &#146;,event%month
       write(*,101)&#146;%day         Day&#46;&#46;&#46;................. &#146;,event%day
       write(*,101)&#146;%tz          Timezone&#46;&#46;&#46;............ &#146;,event%tz
       write(*,101)&#146;%hour        Hour&#46;&#46;&#46;................ &#146;,event%hour
       write(*,101)&#146;%minute      Minute&#46;&#46;&#46;.............. &#146;,event%minute
       write(*,101)&#146;%second      Second&#46;&#46;&#46;.............. &#146;,event%second
       write(*,101)&#146;%millisecond Millisecond&#46;&#46;&#46;......... &#146;,event%millisecond
<P>
       ! PRINT METHODS OF TYPE
       write(*,*)&#146;Print methods of type(DATE_TIME)&#146;
       write(*,101)&#146;%ordinal     Ordinal day of year&#46;&#46;&#46;. &#146;,  event%ordinal()
       write(*,101)&#146;%weekday     Weekday&#46;&#46;&#46;............. &#146;,  event%weekday()
       101 format(1x,a,i0)
       ! DOUBLE PRECISION VALUES EASILY MANIPULATED MATHEMATICALLY
       write(*,202)&#146;%epoch      Unix epoch time&#46;&#46;&#46;..... &#146;,  event%epoch()
       write(*,202)&#146;%julian     Julian date&#46;&#46;&#46;......... &#146;,  event%julian()
       202 format(1x,a,g0)
<P>
       ! FORMATTED STRINGS (many strings possible.
       ! Takes the same format string as fmtdate(3f))
       write(*,*)
       write(*,*)&#146;Formatted Strings (%format("STRING") &
       & -- see fmtdate(3f) for format descriptions&#146;
       ! abbreviated month name             %l  Dec
       write(*,303)&#146;Short month&#46;&#46;&#46;......... &#146;,&
       & event%format("%l")
       !
       ! full month name                    %L  December
       write(*,303)&#146;Month&#46;&#46;&#46;............... &#146;,&
       & event%format("%L")
       !
       ! first three characters of weekday  %w  Sat
       write(*,303)&#146;Short week&#46;&#46;&#46;.......... &#146;,&
       & event%format("%w")
       !
       ! weekday name                       %W  Saturday
       write(*,303)&#146;Week &#46;&#46;&#46;............... &#146;,&
       & event%format("%W")
       !
       ! with no percent (%) characters
       write(*,303)&#146;Calendar Time &#46;&#46;&#46;...... &#146;,&
       & event%format("Y-M-D h:m:s.x z")
       !
       ! keywords with no percent (%) characters
       write(*,303)&#146;Calendar Time &#46;&#46;&#46;...... &#146;,&
       & event%format(&#146;"year-month-day &
       & hour:minute:second.millisecond timezone"&#146;)
       !
       write(*,*)event%format(&#146;Longer format&#46;&#46;&#46;....... &
       &"%W, %L %d, %Y %H:%m:%s %N"&#146;) ! a nice friendly format
       !
       303 format(1x,a,&#146;"&#146;,a,&#146;"&#146;)
<P>
       ! convert date_time to integer array
       ! (maybe to use with module M_TIME base procedures)
       dat=event%datout()
       write(*,*)
       write(*,404)&#146;DAT=&#146;,dat
<P>
       ! OVERLOADED OPERATORS (add and subtract)
       ! a date_time object can have seconds added
       answer=event+1*86400.0d0
       !
       ! a nice friendly format
       write(*,*)answer%format(&#146;TOMORROW="%W, %L %d, %Y %H:%m:%s %N"&#146;)
       !
       ! a date_time object can have seconds subtracted
       answer=event-1*86400.0d0
       ! a nice friendly format
       write(*,*)answer%format(&#146;YESTERDAY="%W, %L %d, %Y %H:%m:%s %N"&#146;)
       !
       ! if both operands are DATE_TIME objects a subtraction
       ! finds the time in seconds between the two dates
       write(*,*)&#146;DIFFERENCE (subtracting one date_time from another)=&#146;,&
       & answer-event
<P>
       ! OVERLOADED OPERATORS (logical comparisons)
       ! NOTE COMPARISONS ARE PERFORMED BY
       ! CONVERTING TIMES TO INTEGER SECONDS
       write(*,*)&#146;&gt; &#146;,event.eq.event   ,event.lt.event   ,event.gt.event &
       & ,event.le.event   ,event.ge.event   ,event.ne.event
       !
       write(*,*)&#146;&gt; &#146;,event.eq.answer  ,event.lt.answer  ,event.gt.answer  &
       & ,event.le.answer  ,event.ge.answer  ,event.ne.answer
       !
       write(*,*)&#146;&gt; &#146;,answer.eq.event  ,answer.lt.event  ,answer.gt.event  &
       & ,answer.le.event  ,answer.ge.event  ,answer.ne.event
<P>
       ! %DELTA easily lets you change dates by common increments
       write(*,*)
       write(*,404)&#146;%DELTA tests starting with date &#146;,event%delta()
       !
       write(*,*) event%format("                             &
       &%W, %L %d, %Y %H:%m:%s %N")
<P>
       write(*,*)&#146;Remember years and months are not constant units&#146;
<P>
       answer=event%delta(year=1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(YEAR=+1)            %W, %L %d, %Y %H:%m:%s %N")
       answer=event%delta(year=-1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(YEAR=-1)            %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(month=24)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MONTH=+24)          %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(month=-24)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MONTH=-24)          %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(week=1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(WEEK=+1)            %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(week=-1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(WEEK=-1)            %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(day=1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(DAY=+1)             %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(day=-1)
       write(*,*)answer%format(&
       & "FOR %%DELTA(DAY=-1)             %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(hour=4)
       write(*,*)answer%format(&
       !
       & "FOR %%DELTA(HOUR=+4)            %W, %L %d, %Y %H:%m:%s %N")
       answer=event%delta(hour=-4)
       write(*,*)answer%format(&
       & "FOR %%DELTA(HOUR=-4)            %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(minute=180)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MINUTE=+180)        %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(minute=-180)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MINUTE=-180)        %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(second=1800)
       write(*,*)answer%format(&
       & "FOR %%DELTA(SECOND=+1800)       %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(second=-1800)
       write(*,*)answer%format(&
       & "FOR %%DELTA(SECOND=-1800)       %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(millisecond=10000)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MILLISECOND=+10000) %W, %L %d, %Y %H:%m:%s %N")
       !
       answer=event%delta(millisecond=-10000)
       write(*,*)answer%format(&
       & "FOR %%DELTA(MILLISECOND=-10000) %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(year=3,month=2,day=100,hour=200,&
       & week=-1,minute=300,second=1000,millisecond=-10000)
       write(*,*)answer%format(&
       !
       &"FOR %%DELTA(year=3,month=2,day=100,hour=200,&
       &week=-1,minute=300,second=1000,millisecond=100000)&
       & %W, %L %d, %Y %H:%m:%s %N")
<P>
       answer=event%delta(duration="1-20:30:40.50")
       write(*,*)answer%format(&
       & "FOR %%DELTA(DURATION=&#146;1-20:30:40.50&#146;)&
       & %W, %L %d, %Y %H:%m:%s %N")
<P>
    end program demo_M_time_oop
<P>
</PRE>
</BLOCKQUOTE>
Sample output:
<P>
<PRE>
 Various initialization styes
  DEFAULT CONSTRUCTOR %format()               1970-01-01T00:00:00.000+00:00
  DEFAULT CONSTRUCTOR %format("")             1970-01-01T00:00:00.000+00:00
  DEFAULT CONSTRUCTOR %format(user-specified) 1970-01-01T00:00:00.000+00:00
  DEFAULT CONSTRUCTOR %format("USA")          Thursday, January 1st, 1970 12:00:00 AM
  DEFAULT CONSTRUCTOR setting values          1492-10-12T00:00:00.000+00:00
  DEFAULT CONSTRUCTOR with partial values     2016-06-11T00:00:00.000+00:00
  DEFAULT CONSTRUCTOR with values by name     2016-06-11T21:09:11.500-04:00
  CONSTRUCTOR with a dat array                1776-07-04T00:00:00.000+00:00
  CONSTRUCTOR with a partial dat array        1776-07-04T20:00:00.000-04:00
<P>
  Print members of type(DATE_TIME)
  EVENT=2020,10,24,-240,21,49,54,105
  %year        Year&#46;&#46;&#46;................ 2020
  %month       Month&#46;&#46;&#46;............... 10
  %day         Day&#46;&#46;&#46;................. 24
  %tz          Timezone&#46;&#46;&#46;............ -240
  %hour        Hour&#46;&#46;&#46;................ 21
  %minute      Minute&#46;&#46;&#46;.............. 49
  %second      Second&#46;&#46;&#46;.............. 54
  %millisecond Millisecond&#46;&#46;&#46;......... 105
  Print methods of type(DATE_TIME)
  %ordinal     Ordinal day of year&#46;&#46;&#46;. 298
  %weekday     Weekday&#46;&#46;&#46;............. 6
  %epoch      Unix epoch time&#46;&#46;&#46;..... 1603590594.1049695
  %julian     Julian date&#46;&#46;&#46;......... 2459147.5763206594
<P>
  Formatted Strings (%format("STRING")  -- see fmtdate(3f) for format descriptions
  Short month&#46;&#46;&#46;......... "Oct"
  Month&#46;&#46;&#46;............... "October"
  Short week&#46;&#46;&#46;.......... "Sat"
  Week &#46;&#46;&#46;............... "Saturday"
  Calendar Time &#46;&#46;&#46;...... "2020-10-24 21:49:54.105 -04:00"
  Calendar Time &#46;&#46;&#46;...... ""2020-10-24 21:49:54.105 -0400""
  Longer format&#46;&#46;&#46;....... "Saturday, October 24th, 2020 9:49:54 PM"
<P>
  DAT=2020,10,24,-240,21,49,54,105
  TOMORROW="Sunday, October 25th, 2020 9:49:54 PM"
  YESTERDAY="Friday, October 23rd, 2020 9:49:54 PM"
  DIFFERENCE (subtracting one date_time from another)=  -86400.000000000000
  &gt;  T F F T T F
  &gt;  F F T F T T
  &gt;  F T F T F T
<P>
  %DELTA tests starting with date 2020,10,24,-240,21,49,54,105
                               Saturday, October 24th, 2020 9:49:54 PM
  Remember years and months are not constant units
  FOR %DELTA(YEAR=+1)            Sunday, October 24th, 2021 9:49:54 PM
  FOR %DELTA(YEAR=-1)            Thursday, October 24th, 2019 9:49:54 PM
  FOR %DELTA(MONTH=+24)          Wednesday, October 26th, 2022 9:49:54 PM
  FOR %DELTA(MONTH=-24)          Wednesday, October 24th, 2018 9:49:54 PM
  FOR %DELTA(WEEK=+1)            Saturday, October 31st, 2020 9:49:54 PM
  FOR %DELTA(WEEK=-1)            Saturday, October 17th, 2020 9:49:54 PM
  FOR %DELTA(DAY=+1)             Sunday, October 25th, 2020 9:49:54 PM
  FOR %DELTA(DAY=-1)             Friday, October 23rd, 2020 9:49:54 PM
  FOR %DELTA(HOUR=+4)            Sunday, October 25th, 2020 1:49:54 AM
  FOR %DELTA(HOUR=-4)            Saturday, October 24th, 2020 5:49:54 PM
  FOR %DELTA(MINUTE=+180)        Sunday, October 25th, 2020 12:49:54 AM
  FOR %DELTA(MINUTE=-180)        Saturday, October 24th, 2020 6:49:54 PM
  FOR %DELTA(SECOND=+1800)       Saturday, October 24th, 2020 10:19:54 PM
  FOR %DELTA(SECOND=-1800)       Saturday, October 24th, 2020 9:19:54 PM
  FOR %DELTA(MILLISECOND=+10000) Saturday, October 24th, 2020 9:50:04 PM
  FOR %DELTA(MILLISECOND=-10000) Saturday, October 24th, 2020 9:49:44 PM
  FOR %DELTA(year=3,month=2,day=100,hour=200,week=-1,minute=300,
  second=1000,millisecond=100000) Thursday, April 4th, 2024 11:06:24 AM
  FOR %DELTA(DURATION=&#146;1-20:30:40.50&#146;) Monday, October 26th, 2020 6:20:34 PM
</PRE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>Nemo Release 3.1</I></TD> <TD width=33% align=center>M_time_oop (3)</TD> <TD align=right width=33%><I>December 19, 2021</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from 94ef2db4-9f15-4f15-8cd9-77fb73a83b39 using man macros.</FONT>
<br><br><center><img src="images/M_time_oop.3m_time.gif"></center>
</div>
</div>
</body>
</HTML>
