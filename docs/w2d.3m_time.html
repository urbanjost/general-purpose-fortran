<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 1.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<h5><a href="index.html">[UP]</a></h5>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>w2d (3)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<B>w2d</B>(3f) - [M_time:WEEK_OF_YEAR] calculate DAT date-time array from iso-8601
Week-numbering year date yyyy-Www-d
(LICENSE:PD)
<P>
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Options</A><BR>
<A HREF=#4>Returns</A><BR>
<A HREF=#5>Example</A><BR>
<A HREF=#6>Definition</A><BR>
<A HREF=#7>Method</A><BR>
<A HREF=#8>Iso_name</A><BR>
<A HREF=#9>Reference</A><BR>
<A HREF=#10>Author</A><BR>
<A HREF=#11>License</A><BR>
</BLOCKQUOTE>
<A name=12>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
subroutine <B>w2d</B>(iso_year,iso_week,iso_weekday,dat)
<P>
<PRE>
    integer,intent(in)      :: iso_year, iso_week, iso_weekday
    integer,intent(out)     :: dat(8)     ! output date array
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
Given an ISO-8601 week return a "DAT" array defining a date and time,
The ISO-8601 is supplied as three integer values defining the ISO
year, week of year and weekday.
</BLOCKQUOTE>
<A name=3>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD colspan=2>
<B>iso_year</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
ISO-8601 year number for the given date
</TD></TR>
<TR valign=top><TD colspan=2>
<B>iso_week</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
ISO-8601 week number for the given date
</TD></TR>
<TR valign=top><TD colspan=2>
<B>iso_weekday</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
ISO-8601 weekday number for the given date
</TD></TR>
<TR valign=top><TD colspan=2>
<B>iso_name</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
ISO-8601 Week string for the data in the form "yyyy-Www-d".
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=4>

     <H3>RETURNS</H3>

</A>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=6% nowrap>
<B>dat</B> </TD><TD valign=bottom>
"DAT" array (an integer array of the same format as
the array returned by the intrinsic <B>DATE_AND_TIME</B>(3f))
describing the date to be used, which is the basic
time description used by the other <B>M_time</B>(3fm) module
procedures.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>EXAMPLE</H3>

</A>
<BLOCKQUOTE>
<P>
Sample program:
<P>
<PRE>
    program demo_w2d
    use M_time, only : w2d, fmtdate
    implicit none
      write(*,&#146;(a)&#146;)&
      & &#146;Given Monday 29 December 2008 is written "2009-W01-1"&#146;
      call printit(2009,1,1)
      write(*,&#146;(a)&#146;)&
      & &#146;Given Sunday 3 January 2010 is written "2009-W53-7"&#146;
      call printit(2009,53,7)
      write(*,&#146;(a)&#146;)&
      & &#146;Given the Gregorian date Sun 31 December 2006 &
      &is written 2006-W52-7&#146;
      call printit(2006,52,7)
      write(*,&#146;(a)&#146;)&
      & &#146;Given 27 September 2008 is 2008-W39-6&#146;
      call printit(2008,39,6)
    contains
    subroutine printit(iso_year,iso_week,iso_weekday)
    ! ISO-8601 Week: 2016-W29-1
    integer  :: iso_year, iso_week, iso_weekday
    ! input date array
    integer  :: dat(8)
     call w2d(iso_year,iso_week,iso_weekday,dat)
     write(*,&#146;(a,i0)&#146;)&#146;GIVEN:           &#146;
     write(*,&#146;(a,i0)&#146;)&#146;ISO-8601 year    &#146;,iso_year
     write(*,&#146;(a,i0)&#146;)&#146;ISO-8601 week    &#146;,iso_week
     write(*,&#146;(a,i0)&#146;)&#146;ISO-8601 weekday &#146;,iso_weekday
     write(*,&#146;(a,i0)&#146;)&#146;RESULT:          &#146;
     write(*,&#146;(a,*(i0:,","))&#146;)&#146;   DAT array        &#146;,dat
     write(*,&#146;(a,/,67("="))&#146;)&#146;    &#146;//fmtdate(dat,&#146;long&#146;)
    end subroutine printit
</PRE>
end program demo_w2d
<P>
Results:
<P>
<PRE>
    Given Monday 29 December 2008 is written "2009-W01-1"
    GIVEN:
    ISO-8601 year    2009
    ISO-8601 week    1
    ISO-8601 weekday 1
    RESULT:
       DAT array        2008,12,29,-240,0,0,0,0
        Monday, December 29th, 2008 12:00:00 AM UTC-04:00
    =========================================================
    Given Sunday 3 January 2010 is written "2009-W53-7"
    GIVEN:
    ISO-8601 year    2009
    ISO-8601 week    53
    ISO-8601 weekday 7
    RESULT:
       DAT array        2010,1,3,-240,0,0,0,0
        Sunday, January 3rd, 2010 12:00:00 AM UTC-04:00
    =========================================================
    Given the Gregorian date Sun 31 December 2006 is written 2006-W52-7
    GIVEN:
    ISO-8601 year    2006
    ISO-8601 week    52
    ISO-8601 weekday 7
    RESULT:
       DAT array        2006,12,31,-240,0,0,0,0
        Sunday, December 31st, 2006 12:00:00 AM UTC-04:00
    =========================================================
    Given 27 September 2008 is 2008-W39-6
    GIVEN:
    ISO-8601 year    2008
    ISO-8601 week    39
    ISO-8601 weekday 6
    RESULT:
       DAT array        2008,9,27,-240,0,0,0,0
        Saturday, September 27th, 2008 12:00:00 AM UTC-04:00
    =========================================================
<P>
</PRE>
</BLOCKQUOTE>
<A name=6>

     <H3>DEFINITION</H3>

</A>
<BLOCKQUOTE>
The ISO-8601 date and time standard was issued by the International
Organization for Standardization (ISO). It is used (mainly) in
government and business for fiscal years, as well as in timekeeping.
The system specifies a week year atop the Gregorian calendar by
defining a notation for ordinal weeks of the year.
<P>
An ISO week-numbering year (also called ISO year informally) has
52 or 53 full weeks. That is 364 or 371 days instead of the usual
365 or 366 days. The extra week is referred to here as a leap week,
although ISO-8601 does not use this term. Weeks start with Monday.
The first week of a year is the week that contains the first Thursday
of the year (and, hence, always contains 4 January). ISO week year
numbering therefore slightly deviates from the Gregorian for some
days close to January 1st.
</BLOCKQUOTE>
<A name=7>

     <H3>METHOD</H3>

</A>
<BLOCKQUOTE>
Calculating a date given the year, week number and weekday
<P>
This method requires that one know the weekday of 4 January of the year
in question. Add 3 to the number of this weekday, giving a correction
to be used for dates within this year.
<P>
Method: Multiply the week number by 7, then add the weekday. From this
sum subtract the correction for the year. The result is the ordinal
date, which can be converted into a calendar date.
If the ordinal date thus obtained is zero or negative,
the date belongs to the previous calendar year; if greater than the
number of days in the year, to the following year.
<P>
Example: year 2008, week 39, Saturday (day 6)
Correction for 2008: 5 + 3 = 8
(39 x 7) + 6 = 279
279 - 8 = 271
Ordinal day 271 of a leap year is day 271 - 244 = 27 September
Result: 27 September 2008
</BLOCKQUOTE>
<A name=8>

     <H3>ISO_NAME</H3>

</A>
<BLOCKQUOTE>
Week date representations are in the format YYYYWww-D.
<BLOCKQUOTE>
<TABLE cellpadding=3><!-- tsb: Week date representations are in the format YYYYWww-D.
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
[YYYY] indicates the ISO week-numbering year which is slightly
different from the traditional Gregorian calendar year.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
[Www] is the week number prefixed by the letter W, from W01 through W53.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
[D] is the weekday number, from 1 through 7, beginning with Monday
and ending with Sunday.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
For example, the Gregorian date 31 December 2006 corresponds to the
Sunday of the 52nd week of 2006, and is written
<P>
<PRE>
    2006-W52-7 (extended form)
    or
    2006W527 (compact form).
<P>
</PRE>
</BLOCKQUOTE>
<A name=9>

     <H3>REFERENCE</H3>

</A>
<BLOCKQUOTE>
From Wikipedia, the free encyclopedia 2016-08-08
</BLOCKQUOTE>
<A name=10>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
John S. Urban, 2015
</BLOCKQUOTE>
<A name=11>

     <H3>LICENSE</H3>

</A>
<BLOCKQUOTE>
Public Domain
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I></I></TD> <TD width=33% align=center>w2d (3)</TD> <TD align=right width=33%><I>March 23, 2021</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from 5cfb1513-d385-4eba-8508-e9775ca12aa9 using man macros.</FONT>
<br><br><center><img src="images/w2d.3m_time.gif"></center>
</div>
</div>
</body>
</HTML>
