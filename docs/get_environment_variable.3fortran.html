<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco, monospace }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:0.1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 0.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<!--
<h5><a href="index.html">[UP]</a></h5>
<button type="button" onclick="javascript:history.back()">Back</button>
-->
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>C Library Functions &nbsp;-&nbsp;</I><NOBR>get_environment_variable (3)</NOBR><HR></H1>
</CENTER>
<P>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<P>
GET_ENVIRONMENT_VARIABLE(3) - [SYSTEM:ENVIRONMENT] Retrieve the value of
an environment variable
<P>
</BLOCKQUOTE>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=9>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<P>
call get_environment_variable(name [,value] [,length] &
& [,status] [,trim_name] [,errmsg] )
<P>
<PRE>
         subroutine character(len=*) get_environment_variable( &
         & name, value, length, status, trim_name, errmsg )
<P>
          character(len=*),intent(in) :: name
          character(len=*),intent(out),optional   :: value
          integer(kind=**),intent(out),optional   :: length
          integer(kind=**),intent(out),optional   :: status
          logical,intent(out),optional            :: trim_name
          character(len=*),intent(inout),optional :: errmsg
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>CHARACTERISTICS</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
a kind designated as ** may be any supported kind for the type
meeting the conditions described herein.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
NAME, VALUE, and ERRMSG are a scalar character of default kind.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
LENGTH and STATUS are integer scalars with a decimal exponent range
of at least four.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
TRIM_NAME is a scalar of type logical and of default kind.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=3>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<P>
GET_ENVIRONMENT_VARIABLE(3) retrieves the VALUE of the environment
variable NAME.
<P>
Note that GET_ENVIRONMENT_VARIABLE(3) need not be thread-safe. It is the
responsibility of the user to ensure that the environment is not being
updated concurrently.
<P>
When running in parallel be aware it is processor dependent whether an
environment variable that exists on an image also exists on another
image, and if it does exist on both images whether the values are the
same or different.
</BLOCKQUOTE>
<A name=4>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
NAME : The name of the environment variable to query. The
interpretation of case is processor dependent.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>RESULT</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
VALUE : The value of the environment variable being queried. If
VALUE is not large enough to hold the data, it is truncated. If the
variable NAME is not set or has no value, or the processor does not
support environment variables VALUE will be filled with blanks.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
LENGTH : This argument contains the length needed to store the
environment variable name. It is zero if the environment variable is
not set.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
STATUS : Returns
<TABLE width=100% cellpadding=3><!-- tsb: STATUS : Returns
 -->
<TR></TR><TR></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
<B>-1</B> if value is present but too short to fit in the provided
variable.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
1 if the environment variable does not exist
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
2 if the processor does not support environment variables
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
and 0 in all other cases.
</TD></TR>
<TR></TR></TABLE><!-- .IP \(bu 3 -->
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
TRIM_NAME : If present and set to .false. the trailing blanks in
name are significant; otherwise, they are not considered part of the
environment variable name.
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
ERRMSG : is assigned a processor-dependent explanatory message if
the optional argument STATUS is, or would be if present, assigned a
positive value. Otherwise, it is unchanged.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=6>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
<P>
Sample program:
<P>
<PRE>
    program demo_getenv
    implicit none
    character(len=:),allocatable :: homedir
    character(len=:),allocatable :: var
<P>
         var=&#146;HOME&#146;
         homedir=get_env(var)
         write (*,&#146;(a,"=""",a,"""")&#146;)var,homedir
<P>
    contains
<P>
    function get_env(name,default) result(value)
    ! a function that makes calling get_environment_variable(3) simple
    use, intrinsic :: iso_fortran_env, only : stderr=&gt;ERROR_UNIT
    implicit none
    character(len=*),intent(in)          :: name
    character(len=*),intent(in),optional :: default
    character(len=:),allocatable         :: value
    integer                              :: howbig
    integer                              :: stat
    integer                              :: length
       length=0
       value=&#146;&#146;
       if(name.ne.&#146;&#146;)then
          call get_environment_variable( name, &
          & length=howbig,status=stat,trim_name=.true.)
          select case (stat)
          case (1)
           write(stderr,*) &
           & name, " is not defined in the environment. Strange&#46;&#46;&#46;"
           value=&#146;&#146;
          case (2)
           write(stderr,*) &
           & "This processor does not support environment variables. Boooh!"
           value=&#146;&#146;
          case default
           ! make string of sufficient size to hold value
           if(allocated(value))deallocate(value)
           allocate(character(len=max(howbig,1)) :: value)
           ! get value
           call get_environment_variable( &
           & name,value,status=stat,trim_name=.true.)
           if(stat.ne.0)value=&#146;&#146;
          end select
       endif
       if(value.eq.&#146;&#146;.and.present(default))value=default
    end function get_env
<P>
    end program demo_getenv
<P>
</PRE>
Typical Results:
<P>
<PRE>
     &gt;  HOME="/home/urbanjs"
<P>
</PRE>
</BLOCKQUOTE>
<A name=7>

     <H3>STANDARD</H3>

</A>
<BLOCKQUOTE>
<P>
Fortran 2003
</BLOCKQUOTE>
<A name=8>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<P>
GET_COMMAND_ARGUMENT(3), GET_COMMAND(3)
<P>
Fortran intrinsic descriptions (license: MIT) @urbanjost
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>Nemo Release 3.1</I></TD> <TD width=33% align=center>get_environment_variable (3)</TD> <TD align=right width=33%><I>December 14, 2024</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from a8065623-24e3-46db-baf0-396dd0bf72a7 using man macros.</FONT>
<br><br><center><img src="images/get_environment_variable.3fortran.gif"></center>
</div>
</div>
</body>
</HTML>
