<html> 
<head> 
<title> </title>
<style> 
px {font-family: "Lucida Console", Monaco }
p { font-size:100%; line-height:1.1em; }
body {xfont-style: sans-serif}
body {
color:#333; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:1em; line-height:1.3em; }
a:visited { color:#666; }
h1,h2,h3,h4,h5,h6 { color:#333; font-family:georgia, verdana, sans-serif; }
h1 { font-size:150%; page-break-before:auto;background-color: #aaaaff}
h2 { font-size:143%;color:teal; }
h3 { font-size:134%;color:blue; }
h4 { font-size:120%;color:gray; }
img { max-width: 55em}
p{ padding: 0;margin:0; }
p{ padding-right:1.4em; }
p{ padding-bottom:1em; }
p{ padding-top:1em; }
p{ whitespace: pre-wrap; }
h5,h6 { font-size:100% }
a.nav,a:link.nav, a:visited.nav { background-color:#FFF; color:#000; }
XXtable { border:double #000; border-collapse:collapse; }
XXtable { border-collapse:collapse; }
XXtd { border:thin solid #888; }
XXtd { border:none; }
li { margin-bottom:0.5em; }
blockquote { display:block; font-size:100%; line-height:1.1em; margin:0 0 1.5em; padding:0 2.5em; }
pre { background-color:#DDD; font-size:100%; overflow:auto; padding:1em; }
a,li span { color:#000; }
a:hover, a.nav:hover, a:hover math { background-color:#000; color:#FFF; }
#Container { margin:0 10px; text-align:center; background-color: #BBB}
#Content { border-top:none; margin:auto; padding:0.3em; text-align:left; width:100%; max-width:55em; background:#FFF}
span.webName { font-size:.5em; }
textarea#content { font-size: 1em; line-height: 1.125; }
h1#pageName { line-height:1em; margin:0.2em 0 0.2em 0; padding:0; }
.property { color:#666; font-size:100%; }
a.existingWikiWord[title]{ //border: 1px dashed #BBB; }
.byline { color:#666; font-size:1.0em; font-style:italic; margin-bottom:1em; padding-top:1px; } 
</style> 
</head>
<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<h5><a href="index.html">[UP]</a></h5>
<div id="Container">
<div id="Content">
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>array_constructors (7)</NOBR><HR></H1>
</CENTER>
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<B>Array_Constructors</B>(7f) - [FORTRAN] An array constructor can be used to create and assign values to rank-one arrays (and array constants)
(LICENSE:PD)
</BLOCKQUOTE>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=6>

     <H3>SYNTAX</H3>

</A>
<BLOCKQUOTE>
An array constructor takes the following form:
<P>
<PRE>
   (/ac-value-list/)
   [ac-value-list]
<P>
</PRE>
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<P>
<P>
</BLOCKQUOTE>
<A name=3>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD colspan=2>
<B>ac-value-list</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
Is a list of one or more expressions or implied-DO loops. Each ac-value
must have the same type and kind parameters, and be separated by commas.
</TD></TR>
<TR valign=top><TD colspan=2>
<B>implied-do</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
An implied-DO loop in an array constructor takes the following form:
</TD></TR>
<TR><TD colspan=2>
<PRE>
                (ac-value-list, do-variable = expr1, expr2 [,expr3])
<P>
</PRE>
</TD></TR>
<TR valign=top><TD colspan=2>
<B>do-variable</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
Is the name of a scalar integer variable. Its scope is that of the implied-DO loop.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
<P>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD width=6% nowrap>
<B>expr</B> </TD><TD valign=bottom>
Is a scalar integer expression. The expr1 and expr2 specify a range of
values for the loop; expr3 specifies the stride. The expr3 must be a
nonzero value; if it is omitted, it is assumed to be 1.
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
<P>
<BLOCKQUOTE>
Description
<P>
The array constructed has the same type as the ac-value-list expressions.
<P>
If the sequence of values specified by the array constructor is empty
(an empty array expression or the implied-DO loop produces no values),
the rank-one array has a size of zero.
<P>
An ac-value is interpreted as follows:
</BLOCKQUOTE>
<P>
<P>
<BLOCKQUOTE>
<TABLE cellpadding=3>
<TR valign=top><TD colspan=2>
<B>Form of ac-value</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
Result
</TD></TR>
<TR valign=top><TD colspan=2>
<B>A scalar expression</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
Its value is an element of the new array.
</TD></TR>
<TR valign=top><TD colspan=2>
<B>An array expression</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
The values of the elements in the expression (in
array element order) are the corresponding sequence of elements in the
new array.
</TD></TR>
<TR valign=top><TD colspan=2>
<B>An implied-DO loop</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
It is expanded to form a list of array elements
under control of the DO variable (like a DO construct).
</TD></TR>
<TR><TD colspan=2>
The following shows the three forms of an ac-value:
</TD></TR>
<TR><TD colspan=2>
<PRE>
  C1 = (/4,8,7,6/)                  ! A scalar expression
  C2 = (/B(I, 1:5), B(I:J, 7:9)/)   ! An array expression
  C3 = (/(I, I=1, 4)/)              ! An implied-DO loop
<P>
</PRE>
You can also mix these forms, for example:
</TD></TR>
<TR><TD colspan=2>
<PRE>
  C4 = (/4, A(1:5), (I, I=1, 4), 7/)
<P>
</PRE>
If every expression in an array constructor is a constant expression,
the array constructor is a constant expression.
</TD></TR>
<TR><TD colspan=2>
If the expressions are of type character, Fortran 95/90 requires each
expression to have the same character length.
</TD></TR>
<TR><TD colspan=2>
However, Intel Fortran allows the character expressions to be of different
character lengths. The length of the resultant character array is the
maximum of the lengths of the individual character expressions. For
example:
</TD></TR>
<TR><TD colspan=2>
<PRE>
   print *,len ( (/&#146;a&#146;,&#146;ab&#146;,&#146;abc&#146;,&#146;d&#146;/) )
   print *,&#146;++&#146;//(/&#146;a&#146;,&#146;ab&#146;,&#146;abc&#146;,&#146;d&#146;/)//&#146;--&#146;
<P>
</PRE>
This causes the following to be displayed:
</TD></TR>
<TR><TD width=6%>&nbsp;</TD><TD>
<P>
3
</TD></TR>
<TR valign=top><TD width=6% nowrap>
<B>++a</B> </TD><TD valign=bottom>
--++ab --++abc--++d  --
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
<P>
<BLOCKQUOTE>
If an implied-DO loop is contained within another implied-DO loop
(nested), they cannot have the same DO variable (do-variable).
<P>
To define arrays of more than one dimension, use the RESHAPE intrinsic
function.
<P>
The following are alternative forms for array constructors:
<P>
Square brackets (instead of parentheses and slashes) to enclose
array constructors; for example, the following two array constructors
are equivalent:
<P>
<PRE>
  INTEGER C(4)
  C = (/4,8,7,6/)
  C = [4,8,7,6]
<P>
</PRE>
</BLOCKQUOTE>
<A name=4>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
<P>
The following example shows an array constructor using an implied-DO loop:
<P>
<PRE>
  INTEGER ARRAY_C(10)
  ARRAY_C = (/(I, I=30, 48, 2)/)
<P>
</PRE>
The values of ARRAY_C are the even numbers 30 through 48.
<P>
Implied-DO expressions and values can be mixed in the value list of an
array constructor. For example:
<P>
<PRE>
 INTEGER A(10)
 A = (/1, 0, (I, I = -1, -6, -1), -7, -8 /)
 !Mixed values and implied-DO in value list.
<P>
</PRE>
This example sets the elements of A to the values, in order,
<P>
<PRE>
   1, 0, -1, -2, -3, -4, -5, -6, -7, -8.
<P>
</PRE>
The following example shows an array constructor of derived type that
uses a structure constructor:
</BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; TYPE EMPLOYEE</H4>
</A>
<BLOCKQUOTE>
</BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; INTEGER ID</H4>
</A>
<BLOCKQUOTE>
<B>CHARACTER</B>(LEN=30) NAME
</BLOCKQUOTE>
<A name=>

    <H4>&nbsp; &nbsp; END TYPE EMPLOYEE</H4>
</A>
<BLOCKQUOTE>
<P>
<B>TYPE</B>(EMPLOYEE) <B>CC_4T</B>(4)
<TABLE cellpadding=3><!-- tsb: <B>TYPE</B>(EMPLOYEE) <B>CC_4T</B>(4)
 -->
<TR></TR><TR></TR>
<TR valign=top><TD colspan=2>
<B>CC_4T = (/</B><B>EMPLOYEE</B>(2732, JONES ), <B>EMPLOYEE</B>(0217, LEE ), </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
<B>EMPLOYEE</B>(1889,"RYAN"), <B>EMPLOYEE</B>(4339,"EMERSON")/)
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P>
The following example shows how the RESHAPE intrinsic function can be
used to create a multidimensional array:
<P>
<PRE>
  E = (/2.3, 4.7, 6.6/)
  D = RESHAPE(SOURCE = (/3.5, (/2.0, 1.0/), E/), SHAPE = (/2,3/))
<P>
</PRE>
<BLOCKQUOTE>
D is a rank-two array with shape (2,3) containing the following elements:
<P>
<PRE>
   3.5    1.0    4.7
   2.0    2.3    6.6
<P>
</PRE>
The following shows another example:
<P>
<PRE>
 INTEGER B(2,3), C(8)
 ! Assign values to a (2,3) array.
 B = RESHAPE((/1, 2, 3, 4, 5, 6/),(/2,3/))
 ! Convert B to a vector before assigning values to
 ! vector C.
 C = (/ 0, RESHAPE(B,(/6/)), 7 /)
<P>
<P>
</PRE>
Example using general purpose fortran routines
<P>
<PRE>
   program demo_array_constructors ! initializing small arrays
   use M_display, only : disp, disp_set
   implicit none
   integer :: i
   integer, parameter :: yy(*) = [  10,20,30  ,  40,50,60  ] ! make some data in a vector, could type this where yy appears below
   ! xx is same thing as yy, just using syntax for filling it that makes it clearer what I want to do with the data
   integer, parameter :: xx(*) = [ [10,20,30] , [40,50,60] ] ! make some data in a vector, could type this where xx appears below
<P>
   integer, dimension(2,3)::aa = reshape(xx,shape(aa),order=[2,1])      ! 2d by rows using reshaped scalar expression
   integer, dimension(2,3)::bb = reshape(xx,shape(bb)             )     ! 2d by columns
   integer, dimension(2,3)::cc = reshape(xx,shape(cc),order=[1,2])      ! 2d by columns
   integer, dimension(2,3)::dd = reshape([(i*10,i=1,size(dd))],shape(dd)) ! an implied do by columns
<P>
   integer, dimension(2,3):: ff, gg, hh
   ! CANNOT DO
   !integer, dimension(2,3)::ff = [10,20,30,40,50,60 ]                                     ! 2d by columns
   ! BUT CAN DO
   data ff/10,20,30,40,50,60/  ! fill 2D with simple data statement
   ! AND CAN DO
   ! multi-dimensional by equivalence
   integer                :: ee(2,3)
   integer                :: e(size(ee))=xx
   equivalence               (e(1),ee(1,1))
   ! CANNOT DO
   !integer, dimension(2,3)::gg = [10,20,30] , [40,50,60]
   !integer, dimension(2,3)::gg = [[10,20,30] , [40,50,60]]
   ! BUT CAN DO
   data gg(1,:)/ 10, 20, 30 /     ! fill rows with data statements
   data gg(2,:)/ 40, 50, 60 /
<P>
   data hh(:,1)/ 10, 40 /         ! fill columns with data statements
   data hh(:,2)/ 20, 50 /
   data hh(:,3)/ 30, 60 /
      call disp_set(style=&#146;left & number&#146;)
<P>
      write(*,*)&#146;SIZE(aa)=&#146;,size(aa)
      write(*,*)&#146;SHAPE(aa)=&#146;,shape(aa)
      write(*,*)&#146;xx=&#146;,xx
      write(*,*)&#146;yy=&#146;,yy
<P>
      call disp(&#146;aa=&#146;,aa)
      call disp(&#146;bb=&#146;,bb)
      call disp(&#146;cc=&#146;,cc)
      call disp(&#146;dd=&#146;,dd)
<P>
      call disp(&#146;ee=&#146;,ee)
<P>
      call disp(&#146;ff=&#146;,ff)
      call disp(&#146;gg=&#146;,gg)
      call disp(&#146;hh=&#146;,hh)
<P>
      write(*,*)repeat(&#146;=&#146;,80)
      write(*,*)hh
      write(*,*)repeat(&#146;=&#146;,80)
      call print_buildfmt(hh)
      write(*,*)repeat(&#146;=&#146;,80)
      call print_fixedfmt(hh)
<P>
   contains
<P>
   subroutine print_buildfmt(arr)
   use M_strings, only : v2s
   implicit none
   integer,intent(in) :: arr(:,:)
   integer :: i
   character(len=:),allocatable :: fmt
      fmt=&#146;("&gt; [",&#146;//v2s(size(arr,dim=2))//&#146;(i0:,","),"]")&#146;
      write(*,*)&#146;FMT=&#146;,fmt
      write(*,fmt)(arr(i,:),i=1,size(arr,dim=1))
   end subroutine print_buildfmt
<P>
   subroutine print_fixedfmt(arr)
   implicit none
   integer,intent(in) :: arr(:,:)
   integer :: i
      do i=1,size(arr,dim=1)
         write(*, &#146;("&gt; [",*(i0:,","))&#146; ,advance=&#146;no&#146;)arr(i,:)
         write(*,&#146;("]")&#146;)
      enddo
   end subroutine print_fixedfmt
<P>
   end program demo_array_constructors ! initializing small arrays
<P>
</PRE>
</BLOCKQUOTE>
<A name=5>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<P>
<TABLE cellpadding=3>
<TR valign=top><TD width=3%>
o
</TD><TD>
DO construct
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
Derived types
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
Structure constructors
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
Array Elements for details on array element order
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
Array Assignment Statements for details on another way to assign values to arrays
</TD></TR>
<TR valign=top><TD width=3%>
o
</TD><TD>
Declaration Statements for Arrays for details on array specifications
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I></I></TD> <TD width=33% align=center>array_constructors (7)</TD> <TD align=right width=33%><I>March 28, 2021</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer 1.08</A> from 8ff862e2-6e82-4468-a0ae-e7ee433d24eb using man macros.</FONT>
<br><br><center><img src="images/array_constructors.7fortran.gif"></center>
</div>
</div>
</body>
</HTML>
